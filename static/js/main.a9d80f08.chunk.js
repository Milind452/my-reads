(this["webpackJsonpmy-reads"]=this["webpackJsonpmy-reads"]||[]).push([[0],{26:function(e,t,o){},27:function(e,t,o){},37:function(e,t,o){"use strict";o.r(t);var n=o(0),s=o.n(n),a=o(20),c=o.n(a),r=o(7),i=(o(26),o(10)),l=o(11),h=o(8),d=o(13),u=o(12),j=o(2),b=(o(27),o(1)),v=function(e){return Object(b.jsxs)("div",{className:"bookshelf",children:[Object(b.jsx)("h2",{className:"bookshelf-title",children:e.title}),Object(b.jsx)("div",{className:"bookshelf-books",children:Object(b.jsx)("ol",{className:"books-grid",children:e.books.map((function(t){return Object(b.jsx)("li",{children:Object(b.jsxs)("div",{className:"book",children:[Object(b.jsxs)("div",{className:"book-top",children:[Object(b.jsx)("div",{className:"book-cover",style:{width:"148px",height:"193px",backgroundImage:"url(".concat(t.imageLinks.thumbnail,")")}}),Object(b.jsx)("div",{className:"book-shelf-changer",children:Object(b.jsxs)("select",{onClick:function(o){e.moveBook(o.target.value,t)},children:[Object(b.jsx)("option",{value:"move",disabled:"",children:"Move to..."}),Object(b.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(b.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(b.jsx)("option",{value:"read",children:"Read"}),Object(b.jsx)("option",{value:"none",children:"None"})]})})]}),Object(b.jsx)("div",{className:"book-title",children:t.title}),Object(b.jsx)("div",{className:"book-authors",children:t.authors})]})},t.id)}))})})]})},p=function(e){Object(d.a)(o,e);var t=Object(u.a)(o);function o(){return Object(i.a)(this,o),t.apply(this,arguments)}return Object(l.a)(o,[{key:"componentDidMount",value:function(){this.props.getBooks()}},{key:"render",value:function(){return Object(b.jsxs)("div",{className:"list-books",children:[Object(b.jsx)("header",{className:"title",children:Object(b.jsx)("h1",{children:"My Reads"})}),Object(b.jsxs)("div",{className:"main-content",children:[Object(b.jsx)(v,{books:this.props.shelves.currentlyReading,title:"Currently Reading",moveBook:this.props.moveBook}),Object(b.jsx)(v,{books:this.props.shelves.wantToRead,title:"Want to Read",moveBook:this.props.moveBook}),Object(b.jsx)(v,{books:this.props.shelves.read,title:"Read",moveBook:this.props.moveBook})]}),Object(b.jsx)("div",{className:"open-search",children:Object(b.jsx)(r.b,{to:"/search",className:"btn",children:"Add a book"})})]})}}]),o}(s.a.Component),k=o(15),O="https://reactnd-books-api.udacity.com",m=localStorage.token;m||(m=localStorage.token=Math.random().toString(36).substr(-8));var f={Accept:"application/json",Authorization:m},x=function(e){Object(d.a)(o,e);var t=Object(u.a)(o);function o(e){var n;return Object(i.a)(this,o),(n=t.call(this,e)).state={query:"",books:[]},n.updateQuery=n.updateQuery.bind(Object(h.a)(n)),n}return Object(l.a)(o,[{key:"updateQuery",value:function(e){this.setState((function(){return{query:e.trim()}}))}},{key:"componentDidUpdate",value:function(e,t){var o,n=this;t.query!==this.state.query&&(o=this.state.query,fetch("".concat(O,"/search"),{method:"POST",headers:Object(k.a)(Object(k.a)({},f),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:o})}).then((function(e){return e.json()})).then((function(e){return e.books}))).then((function(e){"object"===typeof e&&e.hasOwnProperty("error")||void 0===e?n.setState((function(){return{books:[]}})):n.setState((function(){return{books:e}}))}))}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("div",{className:"add-books",children:[Object(b.jsxs)("div",{className:"search-bar",children:[Object(b.jsx)("div",{className:"close-search",children:Object(b.jsx)(r.b,{to:"/",className:"btn",children:"Close"})}),Object(b.jsx)("div",{className:"search-input-wrapper",children:Object(b.jsx)("input",{className:"search-input",type:"text",placeholder:"Search by title or author",value:this.state.query,onChange:function(t){e.updateQuery(t.target.value)}})})]}),Object(b.jsx)("div",{className:"search-result",children:Object(b.jsx)(v,{books:this.state.books,moveBook:this.props.moveBook})})]})}}]),o}(s.a.Component),y=function(e){Object(d.a)(o,e);var t=Object(u.a)(o);function o(e){var n;return Object(i.a)(this,o),(n=t.call(this,e)).state={currentlyReading:[],wantToRead:[],read:[]},n.getBooks=n.getBooks.bind(Object(h.a)(n)),n.moveBook=n.moveBook.bind(Object(h.a)(n)),n}return Object(l.a)(o,[{key:"getBooks",value:function(){var e=this;fetch("".concat(O,"/books"),{headers:f}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(t){var o=[],n=[],s=[];for(var a in t){var c=t[a];"currentlyReading"===c.shelf?o.push(c):"wantToRead"===c.shelf?n.push(c):s.push(c)}e.setState((function(){return{currentlyReading:o,wantToRead:n,read:s}}))}))}},{key:"moveBook",value:function(e,t){"move"!==e&&"none"!==e&&e!==t.shelf&&function(e,t){return fetch("".concat(O,"/books/").concat(e.id),{method:"PUT",headers:Object(k.a)(Object(k.a)({},f),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))}(t,e).then(this.getBooks)}},{key:"render",value:function(){var e=this,t={currentlyReading:this.state.currentlyReading,wantToRead:this.state.wantToRead,read:this.state.read};return Object(b.jsxs)("div",{className:"app",children:[Object(b.jsx)(j.a,{exact:!0,path:"/",render:function(){return Object(b.jsx)(p,{shelves:t,getBooks:e.getBooks,moveBook:e.moveBook})}}),Object(b.jsx)(j.a,{path:"/search",render:function(){return Object(b.jsx)(x,{moveBook:e.moveBook})}})]})}}]),o}(s.a.Component);c.a.render(Object(b.jsx)(r.a,{children:Object(b.jsx)(y,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.a9d80f08.chunk.js.map